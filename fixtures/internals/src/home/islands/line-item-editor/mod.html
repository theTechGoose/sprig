<div>
  <div class="overflow-x-auto">
    <table class="w-full text-sm">
      <thead>
        <tr class="text-xs text-stone-500 uppercase tracking-wider">
          <th class="text-left py-3 pr-2 pl-3 font-medium">Description</th>
          <th class="text-right py-3 px-2 w-24 font-medium">Qty</th>
          <th class="text-left py-3 px-2 w-24 font-medium">Unit</th>
          <th class="text-right py-3 px-2 w-32 font-medium">Price</th>
          <th class="text-right py-3 px-2 w-36 font-medium">Total</th>
          <th class="w-12"></th>
        </tr>
      </thead>
      <tbody>
        <tr
          *for="item of items; let idx = index"
          class="group border-b border-stone-800/20 hover:bg-stone-800/20"
        >
          <td class="py-2.5 pr-2 pl-1">
            <input
              type="text"
              [value]="item.description"
              (input)="onDescriptionInput(idx, $event)"
              class="w-full px-3 py-2.5 border border-transparent rounded-lg text-stone-200 text-sm cell-input"
              placeholder="Line item description"
            />
          </td>
          <td class="py-2.5 px-1">
            <input
              type="number"
              [value]="item.quantity"
              (input)="onQuantityInput(idx, $event)"
              class="w-full px-3 py-2.5 border border-transparent rounded-lg text-stone-200 text-sm cell-input text-right font-mono"
              min="0"
              step="any"
            />
          </td>
          <td class="py-2.5 px-1">
            <input
              type="text"
              [value]="item.unit"
              (input)="onUnitInput(idx, $event)"
              class="w-full px-3 py-2.5 border border-transparent rounded-lg text-stone-200 text-sm cell-input text-center"
              placeholder="ea"
            />
          </td>
          <td class="py-2.5 px-1">
            <input
              type="number"
              [value]="item.price"
              (input)="onPriceInput(idx, $event)"
              class="w-full px-3 py-2.5 border border-transparent rounded-lg text-stone-200 text-sm cell-input text-right font-mono"
              min="0"
              step="0.01"
            />
          </td>
          <td class="py-2.5 px-3 text-right text-stone-300 font-mono tabular-nums">
            {{ formatLineTotal(item) }}
          </td>
          <td class="py-2.5 px-2 text-center">
            <button
              type="button"
              (click)="removeItem(idx)"
              class="p-1.5 rounded-md text-stone-600 opacity-0 group-hover:opacity-100 hover:text-red-400 hover:bg-red-400/10"
            >
              <svg
                class="w-3.5 h-3.5"
                fill="none"
                viewBox="0 0 24 24"
                stroke="currentColor"
                stroke-width="2"
              >
                <path
                  stroke-linecap="round"
                  stroke-linejoin="round"
                  d="M6 18L18 6M6 6l12 12"
                />
              </svg>
            </button>
          </td>
        </tr>
      </tbody>
      <tfoot>
        <tr>
          <td colspan="6" class="pt-1">
            <div class="flex items-center justify-between rounded-lg bg-stone-800/40 px-4 py-3">
              <span class="text-sm font-medium text-stone-400 tracking-wide">
                Subtotal
              </span>
              <span class="font-mono font-semibold text-amber-400 tabular-nums text-base">
                {{ formattedTotal }}
              </span>
            </div>
          </td>
        </tr>
      </tfoot>
    </table>
  </div>
  <button
    type="button"
    (click)="addItem()"
    class="mt-4 flex items-center gap-2 text-sm font-medium text-amber-500 hover:text-amber-400 bg-amber-500/10 hover:bg-amber-500/15 px-4 py-2.5 rounded-lg"
  >
    <svg
      class="w-4 h-4"
      fill="none"
      viewBox="0 0 24 24"
      stroke="currentColor"
      stroke-width="2"
    >
      <path
        stroke-linecap="round"
        stroke-linejoin="round"
        d="M12 4v16m8-8H4"
      />
    </svg>
    Add line item
  </button>
</div>
