<div>
  <!-- Signed state -->
  <div *if="showSignedView" class="space-y-4">
    <div class="relative group">
      <div class="absolute inset-0 bg-gradient-to-r from-green-500/10 via-green-600/10 to-green-500/10 rounded-2xl blur-xl opacity-50"></div>
      <div class="relative overflow-hidden rounded-2xl border-2 border-green-600/50 bg-stone-900/80 p-4">
        <div class="flex items-center gap-2 mb-3">
          <svg class="w-5 h-5 text-green-500" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
            <path stroke-linecap="round" stroke-linejoin="round" d="M9 12l2 2 4-4m5.618-4.016A11.955 11.955 0 0112 2.944a11.955 11.955 0 01-8.618 3.04A12.02 12.02 0 003 9c0 5.591 3.824 10.29 9 11.622 5.176-1.332 9-6.03 9-11.622 0-1.042-.133-2.052-.382-3.016z" />
          </svg>
          <span class="text-sm font-semibold text-green-400">Signature Verified & Locked</span>
        </div>
        <img
          [src]="signatureData"
          alt="Customer signature"
          class="w-full h-40 object-contain rounded-lg bg-stone-800/50"
        />
        <div class="mt-3 flex items-center justify-between text-xs text-stone-500">
          <span>Signed electronically</span>
          <span>{{ currentDate }}</span>
        </div>
      </div>
    </div>
    <div class="flex items-center gap-2 p-4 bg-green-900/20 border border-green-800/30 rounded-xl">
      <svg class="w-5 h-5 text-green-500 flex-shrink-0" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
        <path stroke-linecap="round" stroke-linejoin="round" d="M5 13l4 4L19 7" />
      </svg>
      <p class="text-sm text-green-400">This contract has been signed and is now active. The signature is permanently recorded.</p>
    </div>
  </div>

  <!-- Unsigned state -->
  <div *if="!showSignedView" class="space-y-4">
    <SignaturePad
      [onSave]="handleSave.bind(this)"
      [existingSignature]="existingSignature"
      [disabled]="saving"
    />
    <div *if="saving" class="flex items-center justify-center gap-2 py-4">
      <svg class="w-5 h-5 animate-spin text-amber-500" fill="none" viewBox="0 0 24 24">
        <circle class="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" stroke-width="4"></circle>
        <path class="opacity-75" fill="currentColor" d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"></path>
      </svg>
      <span class="text-sm text-stone-400">Saving signature...</span>
    </div>
    <p class="text-xs text-stone-500 text-center">
      By signing above, you acknowledge that you have read and agree to the terms of this contract.
    </p>
  </div>
</div>
